
---
# 00 Title

[Back to index](../README.md)

---

## Public Key Infraestructure (PKI)
1. Autoridad de Certificación (CA)
	1. Se comunica con autoridad de registro y autoridad de validación
	2. Emite y renueva certificados y gestiona las Listas de Revocación de Certificados (CRL)
2. Autoridad de Registro
	1. Gestiona el registro y peticiones de usuarios
3. Repositorios/Directorios
	1. Almacenan y distribuyen los certificados y CRLs
4. Titulares de certificados y Partes utilizadoras
	1. Usan y confían en los certificados 
5. Autoridad de Validación
	1. Permite la descarfa de las CRLs
	2. Permite obtener estado de certificados a través de OCSP
---
## Autoridad de Sellados de Tiempos (TSA)
- Permite crear sellos de tiempo
- Funcionamiento
	- TSA necesita conocer hash del documento a sellar
	- Concatena el hash con el timestamp y calcula el hash de la concatenación
	- Devuelve el hash cifrado con su clave privada concatenado con el timestamp
---
## Solicitud de Certificado
1. **Con registro presencial**
	1. Solicitud en persona en autoridad de registro y documentación
	2. Autoridad de registro aprueba solicitud. CA emite certificado.
	3. Autoridad de Registro descarga y entrega del certificado.
2. **Con pre-registro remoto**
	1. Usuario pre-registra en CA.
	2. Solicitud (presencial o online) en autoridad de registro y documentación
	3. Autoridad de registro aprueba y solicita emisión de certificado
	4. CA permite al usuario descargarse el certificado.
3. Definido en estándar PKCS#10. Entidad solicitante a CA
	1. Genera par de claves
	2. Crea un `CertificationRequestInfo` (nombre entidad, clave pública y +info)
	3. Firma el `CertificationRequestInfo` con clave privada
	4. Crea el `CertificationRequest` con el `CertificationRequestInfo`+ Alg. Firma + Firma
---
## Estructura PKI Jerárquica
- AC Raíz certifica AC Intermedias (subordinadas) y estas a su vez a finales u otras ACs
- Verificación encadenada. Cualquier entidad debe disponer del AC Raiz
- Cada eslabón de la cadena (certificado) contiene:
	- Nombre y Clave Pública del propietario del certificado
	- Nombre y Clave Pública del propietario del emisor (siguiente en cadena)
- Pasos de validación
	- Comprobar firma, Validez temporal, Si está revocado (CRL o OCSP) y Formato (X.509)
---
## OCSP (Online Certificate Status Protocol)
- Proporcionado por las Autoridades de Validación
- Permite obtener el estado de un certificado (`Good`, `Revoked` o `Unknown`) en base a su ID.
---