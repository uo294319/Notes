
---
# Seguridad de las Aplicaciones

[Back to index](../README.md)

---

## Introducción
- **Manejo de datos de entrada**
	- Tamaño (Desbordamiento de búfer)
	- Interpretación y significado (ataques de inyección)
- **Escribir código Seguro**
- **Manejo de datos de salida**
- **Interacción con SO y otras aplicaciones**
---
## Desbordamiento de Búfer
- **Def**. Al escribir datos en un búfer se desborda y sobre-escribe otras posiciones de memoria.
![](../assets/Pasted%20image%2020251207183033.png)
- **Funciones**
	- Llamada: Push args / Dir retorno / Base Pointer (BP)
	- Final: Limpia hasta BP / cambia el BP / Retorno a dir
- **Shellcode (codigo en binario malicioso)**
	- Dependiente de arquitectura y SO
	- UNIX `execve("/bin/sh")` y WIN `system("command.exe")`
- **Funcionamiento**
![](../assets/Pasted%20image%2020251207183857.png)
- Tobogan NOP hace que el PC retorno no tenga que apuntar exactamente al inicio del shellcode
	- `nop` es una instrucción que no hace nada.
	- Con "caer" en cualquier parte del tobogán se avanzará hasta el shellcode.
- **Defensas**
	- **Defensas en tiempo de compilación**
		- Elección del lenguaje de programación
		- Técnicas de codificación seguras
			- Acciones corporativas (revisar) y Acciones de cada programador
		- Extensiones del lenguaje y uso de bibliotecas seguras (`gets_s()` en vez de `gets()`)
		- Mecanismos de protección de la pila (stack)
	- **Defensas en tiempo de ejecución**
		- Protección del espacio de direcciones ejecutable (bloquear ejecución en pila)
		- Hacer aleatorio el espacio de direcciones
		- Páginas de protección (guard pages- ilegales)
---
## Ataques de Inyección
### SQL
- **Causas**
	- Gestión correcta de caracteres de escape (`'`)
	- Manejo incorrecto de tipos (`1;DROP TABLE` en vez de `1`)
- **Ataque a ciegas de inyección SQL (Blind SQL injection)**
	- Cuando no se obtienen errores. Mediante prueba y error.
	- Se solucionan con consultas preparadas (contienen comprobaciones)
	- **Tipos**
		- **Técnicas de inferencia**
			- Obtener datos añadiendo condición extra
				- Ejemplo
					- Legítima: `SELECT * FROM TABLE WHERE X='xxx'`
					- Prueba: `SELECT * FROM TABLE WHERE X='xxx' and Y='yyy'`
				- Uso común es averiguar `SYSTEM_USER`
				- Podemos probar letras (`SUBSTRING(Y,2,1)='yy'`) o longitudes(`LEN(Y)=3`
				- Con `--` se inician comentarios y se puede ignorar todo lo siguiente.
		- **Técnicas que usan canales alternativos**
### Ataques Cross-site scripting (XSS)
