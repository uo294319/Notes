
---
# Introducción. Servicios Básicos

[Back to index](../README.md)

---
## Servicios
### Definición
- Proporcionado por la capa de aplicación, se monta sobre TCP o UDP.
- Define o implementa su propio protocolo.
- Puede ser usado por el usuario u otro servicio (servicios básicos).
### Servicios Básicos
- **Red**
	- Dynamic Host Configuration Protocol (DHCP)
	- Network Address Translation (NAT)
	- Simple Network Management Protocol (SNMP)
- **Nombres**
	- Domain Name System (DNS)
	- Lightweight Directory Access Protocol (LDAP)
- **Otros**
	- Network Time Protocol (NTP)
---
## Dynamic Host Configuration Protocol (DHCP)
1. **Discovery (cliente)** 
	1. Enviado en broadcast en puerto 67.
	2. Puede especificar que IP prefiere.
	3. Espera respuesta en puerto 68.
2. **Offer (servidor)**
	1. Contiene las IPs disponibles en un pool.
	2. Responde al cliente ofreciéndole una IP al puerto 68.
	3. La respuesta lleva la identificación del servidor.
3. **Request (cliente)**
	1. Si no recibe ofertas repite el paso 1
	2. Si recibe varias elige una y solo 1.
	3. Envía por broadcast la respuesta que contiene el ID del servidor de la oferta elegida.
4. **Acknowledgement (servidor)**
	1. Si la ID no es suya, devuelve la IP ofrecida al pool.
	2. Si la ID es la suya, marca la IP como ocupada por un tiempo (leasing).
	3. Envía el leasing y otros parámetros de configuración al cliente.
5. **Release (cliente)**
	1. Libera la IP para que el servidor la devuelva al pool.
	2. No es obligatorio. Por ello existe el leasing.
---
## Network Address Translation (NAT)
### One-to-One (NAT)
- Traduce una IP por otra a su paso por el router.
- Cambia checksum y otros campos de la cabecera.
### One-to-Many (NAPT - NAT/PAT)
- Traduce varias IPs (privadas) por una única (pública)
- Cambia el puerto de origen.
- Guarda la relación IP y puerto de entrada a un puerto de salida.
### Destination NAT (DNAT)
- NAPT pero ciertos puertos (externos) se asignan siempre la misma IP y puerto internos.
- Técnica llamada *Port Forwarding* o *Port Mapping*
---